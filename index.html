<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Bid Polish Bid 2026-2027</title>
    <link rel="stylesheet" href="bidding.css">
    <style>
        /* Make the lines panel scrollable with sticky headers */
        .panel:has(#linesPanel) {
            overflow: visible;
            display: flex;
            flex-direction: column;
        }
        
        #linesPanel {
            overflow-y: auto;
            max-height: calc(100vh - 250px);
            position: relative;
        }
        
        .lines-holiday-subheader {
            position: sticky;
            z-index: 15;
            background: #16213e;
            border-bottom: 1px solid #0f3460;
        }
        
        .lines-holiday-subheader:nth-of-type(1) {
            top: 0;
        }
        
        .lines-holiday-subheader:nth-of-type(2) {
            top: 20px;
        }
        
        .lines-holiday-subheader:nth-of-type(3) {
            top: 40px;
        }
        
        .lines-header {
            position: sticky;
            top: 60px;
            z-index: 15;
            background: #0f3460;
            border-bottom: 2px solid #4ecca3;
        }
    </style>
</head>
<body>
    <div style="background: #16213e; color: #4ecca3; padding: 8px 20px; text-align: center; font-size: 12px; border-bottom: 1px solid #0f3460;">
        üí° This page works best in Google Chrome
    </div>
    <div class="header">

        <div class="header-content">
            <h1>Pre-Bid Polish Bid 2026-2027</h1>
            <p>Bid Year: April 1, 2026 - March 31, 2027 | 12-Day Rotating Pattern</p>
            <a href="https://deltaairlines-my.sharepoint.com/:x:/g/personal/chris_pawlowski_delta_com/IQAbT09o3fqGSavtsSyMl9LYAcWkXT1gOk3phPrstErOaW8" target="_blank" rel="noopener noreferrer" style="display:inline-block; margin-top:12px; padding:10px 20px; background:#217346; color:white; font-size:14px; font-weight:bold; text-decoration:none; border-radius:6px;">üìä Open Excel Spreadsheet (Microsoft 365)</a>
            <a href="bid_times.html" target="_blank" style="display:inline-block; margin-top:12px; margin-left:10px; padding:10px 20px; background:#c53030; color:white; font-size:14px; font-weight:bold; text-decoration:none; border-radius:6px;">‚è∞ View Official Bid Times</a>
        </div>
    </div>

    <div class="status-bar">
        <div class="stats">
            <span style="color:#e94560; font-weight:bold; margin-right:5px;">SSOM:</span>
            <div class="stat">
                <span class="stat-label">Taken:</span>
                <span class="stat-value" id="statTakenSSOM">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Avail:</span>
                <span class="stat-value available" id="statAvailSSOM">14</span>
            </div>
            <span style="color:#e94560; font-weight:bold; margin-left:15px; margin-right:5px;">SOM:</span>
            <div class="stat">
                <span class="stat-label">Taken:</span>
                <span class="stat-value" id="statTakenSOM">0</span>
            </div>
            <div class="stat">
                <span class="stat-label">Avail:</span>
                <span class="stat-value available" id="statAvailSOM">81</span>
            </div>
            <button class="btn btn-legend" onclick="showLegend()">Legend</button>
            <button class="btn" onclick="showHolidaySummary()" style="background:#e94560; color:white;">üéÑ Holiday Summary</button>
            <button class="btn" onclick="showSwapCompare()" style="background:#9b59b6; color:white;">üîÑ Swap Compare</button>
            <span class="mode-indicator viewer" id="modeIndicator">VIEWER</span>
        </div>
        <div class="sync-status">
            <div class="sync-dot" id="syncDot"></div>
            <span id="syncText">Connecting...</span>
            <button class="btn" onclick="loadFromCloud()" style="padding:4px 12px; font-size:11px; margin-left:8px; background:#4ecca3; color:#1a1a2e; font-weight:bold;">‚ü≥ Refresh</button>
            <span style="color:#888; font-size:10px; margin-left:5px;">Auto-refreshes every 5 min | Last: <span id="lastRefresh">--</span></span>
        </div>
    </div>

    <div class="main-wrapper">
        <div class="main-container">
            <div class="panel">
                <div class="panel-header">Seniority List</div>
                <div class="panel-content" id="seniorityPanel">
                    <div class="entry-header">
                        <span>#</span>
                        <span>Name</span>
                        <span>Line</span>
                        <span></span>
                    </div>
                    <div class="group-title" id="group1Title">SSOM (14)</div>
                    <div id="group1List"></div>
                    <div class="group-title" id="group2Title">SOM (82)</div>
                    <div id="group2List"></div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">All Lines <span style="font-weight:normal; font-size:11px; color:#888;">(*Click Desc for year calendar)</span></div>
                <div class="panel-content" id="linesPanel">
                    <div class="lines-holiday-subheader">
                        <span class="spacer"></span>
                        <span></span><span></span><span></span><span></span>
                        <span></span><span></span><span></span><span></span>
                        <span></span><span></span><span></span><span></span>
                    </div>
                    <div class="lines-holiday-subheader">
                        <span class="spacer"></span>
                        <span></span><span></span><span></span><span>LABOR</span>
                        <span>XMAS</span><span></span><span></span><span></span>
                        <span></span><span></span><span></span><span>NYD</span>
                    </div>
                    <div class="lines-holiday-subheader">
                        <span class="spacer"></span>
                        <span>SUPER</span><span>EAST2</span><span>STPAT</span><span>MOM</span>
                        <span>EAST1</span><span></span><span>MEMOR</span><span></span>
                        <span></span><span>DAD</span><span>4TH</span><span>THX</span>
                    </div>
                    <div class="lines-header">
                        <span>Line</span>
                        <span>Desc*</span>
                        <span>Bidder</span>
                        <span>1</span><span>2</span><span>3</span><span>4</span>
                        <span>5</span><span>6</span><span>7</span><span>8</span>
                        <span>9</span><span>10</span><span>11</span><span>12</span>
                    </div>
                    <div id="allLinesList"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div>
            <button class="btn btn-secondary" onclick="clearAll()" id="clearBtn" disabled>Clear All</button>
        </div>
        <div>
            <button class="btn btn-admin" onclick="showPasswordModal()" id="adminBtn">Admin Login</button>
        </div>
    </div>

    <div class="modal-overlay" id="passwordModal">
        <div class="password-modal">
            <h3>üîê Admin Login</h3>
            <p style="color:#888; font-size:12px; margin-bottom:15px;">Enter password to enable editing</p>
            <input type="password" id="passwordInput" placeholder="Password" onkeydown="if(event.key==='Enter')checkPassword()">
            <div class="password-error" id="passwordError">Incorrect password</div>
            <button class="btn btn-primary" onclick="checkPassword()" style="width:100%; padding:12px;">Login</button>
            <button class="btn btn-secondary" onclick="hidePasswordModal()" style="width:100%; padding:12px; margin-top:10px;">Cancel</button>
        </div>
    </div>

    <div class="modal-overlay" id="legendModal" onclick="hideLegend()">
        <div class="modal" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="hideLegend()">Close</button>
            <h3>Legend</h3>
            <div class="legend-grid">

                <div class="legend-section">
                    <h4>Bridge Desks</h4>
                    <div class="legend-item"><span class="legend-code">N</span><span>321NEO</span></div>
                    <div class="legend-item"><span class="legend-code">O</span><span>717*</span></div>
                    <div class="legend-item"><span class="legend-code">Q</span><span>B738/B73R/B73J</span></div>
                    <div class="legend-item"><span class="legend-code">R</span><span>A220</span></div>
                    <div class="legend-item"><span class="legend-code">S</span><span>B739</span></div>
                    <div class="legend-item"><span class="legend-code">U</span><span>B763/764</span></div>
                    <div class="legend-item"><span class="legend-code">V</span><span>A321</span></div>
                    <div class="legend-item"><span class="legend-code">W</span><span>B757</span></div>
                    <div class="legend-item"><span class="legend-code">X</span><span>A319/A320</span></div>
                    <div class="legend-item"><span class="legend-code">Y</span><span>A330/A350</span></div>
                </div>
                <div class="legend-section">
                    <h4>SPT Desks</h4>
                    <div class="legend-item"><span class="legend-code">C/D/E</span><span>Terminal</span></div>
                    <div class="legend-item"><span class="legend-code">F</span><span>Routes</span></div>
                    <div class="legend-item"><span class="legend-code">G</span><span>Enroute</span></div>
                    <div class="legend-item"><span class="legend-code">H</span><span>Surface</span></div>
                    <div class="legend-item"><span class="legend-code">J/K</span><span>Regional</span></div>
                </div>
                <div class="legend-section">
                    <h4>SSOM Desks</h4>
                    <div class="legend-item"><span class="legend-code">A/B</span><span>SSOM SPT</span></div>
                    <div class="legend-item"><span class="legend-code">M/Z</span><span>SSOM Bridge</span></div>
                </div>
                <div class="legend-section">
                    <h4>2026-2027 Holidays</h4>
                    <div class="legend-item"><span class="legend-code">Pattern day 1</span><span>Super Bowl</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 2</span><span>Easter 2</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 3</span><span>St. Patrick's</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 4</span><span>Labor, Mom</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 5</span><span>Xmas, Easter 1</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 7</span><span>Memorial</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 10</span><span>Father's Day</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 11</span><span>July 4th</span></div>
                    <div class="legend-item"><span class="legend-code">Pattern day 12</span><span>NYD, Thanksgiving</span></div>
                </div>
            </div>
            <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #0f3460; font-size: 11px; color: #888;">
                * May receive other fleets depending on daily workload of other desks
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="calendarModal" onclick="hideCalendar()">
        <div class="calendar-modal" onclick="event.stopPropagation()">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <h3 id="calendarTitle" style="margin:0;">Year Calendar</h3>
                <div>
                    <button class="btn btn-legend" onclick="toggleCalendarView()" style="margin-right:10px; background:#9b59b6; color:white;">üìÖ Toggle View</button>
                    <button class="btn btn-legend" onclick="copyCalendarLink()" style="margin-right:10px;">üîó Copy Link</button>
                    <button class="btn" onclick="printCalendar()" style="margin-right:10px;">üñ®Ô∏è Print</button>
                    <button class="modal-close" onclick="hideCalendar()" style="position:relative; top:0; right:0;">Close</button>
                </div>
            </div>
            <div class="calendar-grid" id="calendarGrid"></div>
            <div class="traditional-view" id="traditionalView" style="display:none;"></div>
            <div class="calendar-legend">
                <span class="calendar-legend-item" style="color:#e94560; background:rgba(233,69,96,0.2); border:1px solid #e94560;">Holiday</span>
                <span class="calendar-legend-item" style="background:#FF0000; color:#fff; border:1px solid #FF0000;">Balance Adjustment</span>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="holidaySummaryModal" onclick="hideHolidaySummary()">
        <div class="modal" style="max-width:1100px; width:95vw;" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="hideHolidaySummary()">Close</button>
            <h3>üéÑ Holiday Summary - Lines with Holidays Off</h3>
            <p style="color:#888; font-size:12px; margin-bottom:15px;">Shows which lines have each holiday off (indicated by -- on that pattern day)</p>
            <div id="holidaySummaryContent"></div>
        </div>
    </div>

    <div class="modal-overlay" id="swapCompareModal" onclick="hideSwapCompare()">
        <div class="modal" style="max-width:1200px; width:95vw; max-height:90vh;" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="hideSwapCompare()">Close</button>
            <h3>üîÑ Swap Compatibility Analyzer</h3>
            <p style="color:#888; font-size:12px; margin-bottom:15px;">Find line pairs for shift swapping (same group only, 8-hour rest rule enforced)</p>

            <!-- Manual Line Comparison -->
            <div style="background:#0f3460; padding:15px; border-radius:8px; margin-bottom:20px;">
                <h4 style="color:#4ecca3; margin-bottom:10px;">üìä Manual Line Comparison</h4>
                <p style="color:#888; font-size:11px; margin-bottom:10px;">Compare any two lines side-by-side throughout the year</p>
                <div style="display:flex; gap:15px; margin-bottom:10px; flex-wrap:wrap; align-items:flex-end;">
                    <div>
                        <label style="color:#ccc; font-size:12px; display:block; margin-bottom:5px;">Line A:</label>
                        <select id="manualCompareLineA" style="padding:8px; border-radius:5px; background:#16213e; color:#fff; border:1px solid #4ecca3; font-size:14px; min-width:150px;">
                            <option value="">Select Line A</option>
                        </select>
                    </div>
                    <div>
                        <label style="color:#ccc; font-size:12px; display:block; margin-bottom:5px;">Line B:</label>
                        <select id="manualCompareLineB" style="padding:8px; border-radius:5px; background:#16213e; color:#fff; border:1px solid #4ecca3; font-size:14px; min-width:150px;">
                            <option value="">Select Line B</option>
                        </select>
                    </div>
                    <button class="btn" onclick="showManualComparison()" style="background:#e94560; color:#fff; padding:8px 20px;">Compare Lines</button>
                    <button class="btn" onclick="clearManualComparison()" style="background:#888; color:#fff; padding:8px 20px;">Clear</button>
                </div>
                <div id="manualCompareView" style="display:none; margin-top:15px;">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                        <h4 style="color:#4ecca3; margin:0;">Comparison View</h4>
                        <button class="btn" onclick="printManualComparison()" style="background:#9b59b6; color:#fff; padding:5px 15px; font-size:12px;">üñ®Ô∏è Print</button>
                    </div>
                    <div id="manualCompareContent" style="background:#16213e; padding:10px; border-radius:5px; overflow-x:auto;"></div>
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-bottom:15px; flex-wrap:wrap; align-items:center; justify-content:space-between;">
                <div style="display:flex; gap:10px;">
                    <button class="btn" onclick="showSwapCategory('fiveSevenOff')" id="btn-fiveSevenOff" style="background:#4ecca3; color:#1a1a2e;">5 On / 7 Off</button>
                    <button class="btn" onclick="showSwapCategory('twoDayPickup')" id="btn-twoDayPickup" style="background:#0f3460; color:#eee;">2-Day Pickup Swap</button>
                </div>
                <button class="btn" onclick="printSwapCompare()" style="background:#9b59b6; color:#fff; padding:5px 15px; font-size:12px;">üñ®Ô∏è Print</button>
            </div>
            <div id="swapCompareContent"></div>
        </div>
    </div>

    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<!-- Firebase Configuration -->
<script>
const firebaseConfig = {
  apiKey: "AIzaSyDD7V8bTZK8q7ADvR7rx56n9UDZs5O7PjU",
  authDomain: "bid2026-58308.firebaseapp.com",
  databaseURL: "https://bid2026-58308-default-rtdb.firebaseio.com",
  projectId: "bid2026-58308",
  storageBucket: "bid2026-58308.firebasestorage.app",
  messagingSenderId: "312871238158",
  appId: "1:312871238158:web:b880eea86e983d1dac9a5f"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
</script>

<!-- Your JavaScript -->
<script src="bidding.js"></script>
</body>
</html>
